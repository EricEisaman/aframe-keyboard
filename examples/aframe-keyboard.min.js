!function(e){var t={};function a(n){if(t[n])return t[n].exports;var d=t[n]={i:n,l:!1,exports:{}};return e[n].call(d.exports,d,d.exports,a),d.l=!0,d.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)a.d(n,d,function(t){return e[t]}.bind(null,d));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){a(1),a(3);const n=a(4),d={mode:"normal"};d.template=new n,e.exports=window.AFK=d},function(e,t,a){const n=a(2);if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("a-keyboard",{schema:{audio:{default:!1},color:{default:"#fff"},highlightColor:{default:"#1a79dc"},dismissable:{default:!0},font:{default:"monoid"},fontSize:{default:"0.39"},locale:{default:"en"},model:{default:""},baseTexture:{default:""},keyTexture:{default:""},verticalAlign:{default:"center"}},init:function(){AFK.template.draw({...this.data,el:this.el}),this.attachEventListeners()},attachEventListeners:function(){window.addEventListener("keydown",this.handleKeyboardPress),this.el.addEventListener("click",this.handleKeyboardVR)},removeEventListeners:function(){window.removeEventListener("keydown",this.handleKeyboardPress),this.el.removeEventListener("click",this.handleKeyboardVR)},handleKeyboardPress:function(e){n(e)},handleKeyboardVR:function(e){n(e,"vr")},remove:function(){this.removeEventListeners()}})},function(e,t){e.exports=function(e,t){let a;const n=new Set([16,17,18,20,33,34,35,36,45,46,112,113,114,115,116,117,118,119,120,121,122,123]),d=e.key&&e.key.charCodeAt(0);let r=e.key,s=e.keyCode;if("vr"===t)s=parseInt(document.querySelector(`#${e.target.id}`).getAttribute("key-code")),r=document.querySelector(`#${e.target.id}`).getAttribute("value");else if(n.has(e.keyCode))return;switch(s){case 9:a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:"\t"}}),document.dispatchEvent(a);break;case 8:a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:""}}),document.dispatchEvent(a);break;case 13:a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:"\n"}}),document.dispatchEvent(a);break;case 16:AFK.template.toggleActiveMode("shift");break;case 18:AFK.template.toggleActiveMode("alt");break;case 27:this.dismissable&&(a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:""}}),document.dispatchEvent(a));break;case 32:a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:" "}}),document.dispatchEvent(a);break;case 998:a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:""}}),document.dispatchEvent(a);break;default:a=new CustomEvent("a-keyboard-update",{detail:{code:s,value:r}}),document.dispatchEvent(a)}if("vr"!==t){const t=document.querySelector(`#a-keyboard-${d}`)||document.querySelector(`#a-keyboard-${e.keyCode}`);t&&(t.dispatchEvent(new Event("mousedown")),setTimeout(function(){t.dispatchEvent(new Event("mouseleave"))},80))}}},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("keyboard-button",{schema:{highlightColor:{default:"#f4f4f4"},keyColor:{default:"#fff"}},init:function(){const e=this.el,t=e.parentElement.children[0],a=this,n=this.data.highlightColor,d=this.data.keyColor;e.addEventListener("mousedown",function(){t.setAttribute("material","opacity","0.7"),t.setAttribute("material","color",n)}),e.addEventListener("mouseup",function(){t.setAttribute("material","opacity",a.isMouseEnter?"0.9":"1"),t.setAttribute("material","color",a.isMouseEnter?n:d)}),e.addEventListener("mouseenter",function(){a.removeAnimations(e),a.removeAnimations(t),t.setAttribute("material","opacity","0.9"),t.setAttribute("material","color",n),a.attachMouseEnterAnimations(e),a.attachMouseEnterAnimations(t),a.isMouseEnter=!0}),e.addEventListener("mouseleave",function(){t.setAttribute("material","opacity","1"),t.setAttribute("material","color",d),a.attachMouseLeaveAnimations(e),a.attachMouseLeaveAnimations(t),a.isMouseEnter=!1})},attachMouseEnterAnimations:function(e){e.setAttribute("animation__mouseenter_position","property: position; to: 0 0 0.015; dur: 200; autoplay: true;"),e.setAttribute("animation__mouseenter_scale","property: scale; to: 1.1 1.1 1; dur: 200; autoplay: true;")},attachMouseLeaveAnimations:function(e){e.setAttribute("animation__mouseleave_position","property: position; to: 0 0 0; autoplay: true; dur: 200"),e.setAttribute("animation__mouseleave_scale","property: scale; to: 1 1 1; autoplay: true; dur: 200")},removeAnimations:function(e){e.removeAttribute("animation__mouseenter_position"),e.removeAttribute("animation__mouseenter_scale"),e.removeAttribute("animation__mouseleave_position"),e.removeAttribute("animation__mouseleave_scale")}})},function(e,t,a){const n=a(5),d=.02,r=.004,s=.04,i="#4a4a4a";e.exports=class{constructor(){this.keyboardKeys={},this.activeMode="normal"}draw(e){for(const t in e)this[t]=e[t];this.keyboardKeys=n(e.locale),this.drawKeyboard()}drawButton(e){const t=e.key;if(console.log(t),t&&!isNaN(t.code)){const a=t.size.split(" ")[0],n=t.size.split(" ")[1],d=document.createElement("a-entity");d.setAttribute("position",e.position);const r=document.createElement("a-entity");r.setAttribute("geometry",`primitive: plane; width: ${a}; height: ${n};`),this.keyTexture&&this.keyTexture.length>0?r.setAttribute("material",`src: ${this.keyTexture}`):r.setAttribute("material",`color: ${i}; opacity: 0.9`);const s=document.createElement("a-text");s.id=`a-keyboard-${t.code}`,s.setAttribute("key-code",t.code),s.setAttribute("value",t.value),s.setAttribute("align","center"),s.setAttribute("baseline",this.verticalAlign),s.setAttribute("position","0 0 0.001"),s.setAttribute("width",this.fontSize),s.setAttribute("height",this.fontSize),s.setAttribute("geometry",`primitive: plane; width: ${a}; height: ${n}`),s.setAttribute("material","opacity: 0.0; transparent: true; color: #fff"),s.setAttribute("color",this.color),s.setAttribute("font",this.font),s.setAttribute("keyboard-button",`highlightColor: ${this.highlightColor}; keyColor: ${i}`),s.setAttribute("class","collidable"),d.appendChild(r),d.appendChild(s),this.el.appendChild(d)}}drawKeyboard(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);if(this.keyboardKeys){const e=this.keyboardKeys[this.activeMode]||this.keyboardKeys.normal,t=document.createElement("a-entity"),a=11*s+10*r+2*d;let n=s*e.length+r*(e.length-1)+2*d,i=0;this.dismissable&&(n=s*(e.length+1)+r*(e.length-1)+2*d,i=-(s+r),this.drawButton({key:{size:`${s} ${s} 0`,value:"X",code:"998"},position:`${10*s+10*r+d} ${-d+r} 0`})),t.setAttribute("position",`${a/2-d} ${-n/2+d} -0.01`),t.setAttribute("geometry",`primitive: plane; width: ${a}; height: ${n}`),this.baseTexture&&this.baseTexture.length>0?t.setAttribute("material",`src: ${this.baseTexture}`):t.setAttribute("material","color: #4a4a4a; side: double; opacity: 0.7"),this.el.appendChild(t);for(let t=0;t<e.length;t++){const a=e[t];let n=0;for(let e=0;e<a.length;e++){const t=a[e],d=this.parseKeyObjects(t),u=d.size.split(" ")[0],o=d.size.split(" ")[1];this.drawButton({key:d,position:`${n+u/2} ${i-o/2} 0`}),n+=parseFloat(u)+r,a.length===e+1&&(i-=s+r)}}}}toggleActiveMode(e){e===this.activeMode?(this.activeMode="normal",this.drawKeyboard()):(this.activeMode=e,this.drawKeyboard())}parseKeyObjects(e){const t=e.type,a=e.value;switch(t){case"delete":return{size:`${s} ${s} 0`,value:a,code:"8"};case"enter":return{size:`${s} ${2*s+r} 0`,value:a,code:"13"};case"shift":return{size:`${2*s+r} ${s} 0`,value:a,code:"16"};case"alt":return{size:`${2*s+r} ${s} 0`,value:a,code:"18"};case"space":return{size:`${5*s+4*r} ${s} 0`,value:a,code:"32"};case"submit":return{size:`${2*s+r} ${s} 0`,value:a,code:"999"};default:return{size:`${s} ${s} 0`,value:a,code:a.charCodeAt(0)}}}}},function(e,t,a){const n=a(6);e.exports=function(e){switch(e){case"en":default:return n}}},function(e,t){e.exports={name:"ms-US-International",normal:[[{value:"1",type:"standard"},{value:"2",type:"standard"},{value:"3",type:"standard"},{value:"4",type:"standard"},{value:"5",type:"standard"},{value:"6",type:"standard"},{value:"7",type:"standard"},{value:"8",type:"standard"},{value:"9",type:"standard"},{value:"0",type:"standard"},{value:"<-",type:"delete"}],[{value:"q",type:"standard"},{value:"w",type:"standard"},{value:"e",type:"standard"},{value:"r",type:"standard"},{value:"t",type:"standard"},{value:"y",type:"standard"},{value:"u",type:"standard"},{value:"i",type:"standard"},{value:"o",type:"standard"},{value:"p",type:"standard"},{value:"Ent",type:"enter"}],[{value:"a",type:"standard"},{value:"s",type:"standard"},{value:"d",type:"standard"},{value:"f",type:"standard"},{value:"g",type:"standard"},{value:"h",type:"standard"},{value:"j",type:"standard"},{value:"k",type:"standard"},{value:"l",type:"standard"},{value:'"',type:"standard"}],[{value:"Shift",type:"shift"},{value:"z",type:"standard"},{value:"x",type:"standard"},{value:"c",type:"standard"},{value:"v",type:"standard"},{value:"b",type:"standard"},{value:"n",type:"standard"},{value:"m",type:"standard"},{value:"Alt",type:"alt"}],[{value:"",type:"standard"},{value:"",type:"standard"},{value:"",type:"space"},{value:".",type:"standard"},{value:",",type:"standard"},{value:"Submit",type:"submit"}]],shift:[[{value:"1",type:"standard"},{value:"2",type:"standard"},{value:"3",type:"standard"},{value:"4",type:"standard"},{value:"5",type:"standard"},{value:"6",type:"standard"},{value:"7",type:"standard"},{value:"8",type:"standard"},{value:"9",type:"standard"},{value:"0",type:"standard"},{value:"<-",type:"delete"}],[{value:"Q",type:"standard"},{value:"W",type:"standard"},{value:"E",type:"standard"},{value:"R",type:"standard"},{value:"T",type:"standard"},{value:"Y",type:"standard"},{value:"U",type:"standard"},{value:"I",type:"standard"},{value:"O",type:"standard"},{value:"P",type:"standard"},{value:"Ent",type:"enter"}],[{value:"A",type:"standard"},{value:"S",type:"standard"},{value:"D",type:"standard"},{value:"F",type:"standard"},{value:"G",type:"standard"},{value:"H",type:"standard"},{value:"J",type:"standard"},{value:"K",type:"standard"},{value:"L",type:"standard"},{value:'"',type:"standard"}],[{value:"Shift",type:"shift"},{value:"Z",type:"standard"},{value:"X",type:"standard"},{value:"C",type:"standard"},{value:"V",type:"standard"},{value:"B",type:"standard"},{value:"N",type:"standard"},{value:"M",type:"standard"},{value:"Alt",type:"alt"}],[{value:"",type:"space"},{value:",",type:"standard"},{value:".",type:"standard"},{value:"Submit",type:"submit"}]],alt:[[{value:"1",type:"standard"},{value:"2",type:"standard"},{value:"3",type:"standard"},{value:"4",type:"standard"},{value:"5",type:"standard"},{value:"6",type:"standard"},{value:"7",type:"standard"},{value:"8",type:"standard"},{value:"9",type:"standard"},{value:"0",type:"standard"},{value:"<-",type:"delete"}],[{value:"~",type:"standard"},{value:"`",type:"standard"},{value:"|",type:"standard"},{value:"(",type:"standard"},{value:")",type:"standard"},{value:"^",type:"standard"},{value:"_",type:"standard"},{value:"-",type:"standard"},{value:"=",type:"standard"},{value:"!",type:"standard"},{value:"Ent",type:"enter"}],[{value:"@",type:"standard"},{value:"#",type:"standard"},{value:"$",type:"standard"},{value:"%",type:"standard"},{value:"*",type:"standard"},{value:"[",type:"standard"},{value:"]",type:"standard"},{value:"#",type:"standard"},{value:"<",type:"standard"},{value:"?",type:"standard"}],[{value:"Shift",type:"shift"},{value:":",type:"standard"},{value:";",type:"standard"},{value:"{",type:"standard"},{value:"}",type:"standard"},{value:"/",type:"standard"},{value:"\\",type:"standard"},{value:">",type:"standard"},{value:"Alt",type:"alt"}],[{value:"",type:"space"},{value:",",type:"standard"},{value:".",type:"standard"},{value:"Submit",type:"submit"}]]}}]);