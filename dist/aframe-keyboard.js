!function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){a(1);var o=a(2);let r={mode:"normal"};r.template=new o,e.exports=window.AFK=r},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("keyboard-button",{init:function(){var e=this.el,t=this;e.addEventListener("mousedown",function(){e.setAttribute("material","opacity","0.7")}),e.addEventListener("mouseup",function(){e.setAttribute("material","opacity",t.isMouseEnter?"0.4":"0")}),e.addEventListener("mouseenter",function(){e.setAttribute("material","opacity","0.4"),t.isMouseEnter=!0}),e.addEventListener("mouseleave",function(){e.setAttribute("material","opacity","0"),t.isMouseEnter=!1})}}),AFRAME.registerComponent("a-keyboard",{schema:{model:{default:""},font:{default:"Helvetica"},color:{default:"#000"},handleUpdate:{type:"string"},locale:{default:"en"},value:{default:""},audio:{default:!1},interactionMode:{default:"desktop"}},init:function(){const e=this.el,t=this.data.locale,a=this.data.model,o=this.data.font,r=this.data.color;AFK.template.draw({locale:t,model:a,font:o,el:e,color:r}),this.attachEventListeners()},attachEventListeners:function(){document.querySelector("#keyboard").addEventListener("click",this.handleKeyboardVR),window.addEventListener("keydown",this.handleKeyboardPress)},handleKeyboardPress:function(e){let t;switch(e.keyCode){case 13:t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:"\n"}}),document.dispatchEvent(t);break;case 8:case 9:break;case 16:AFK.template.toggleActiveMode("shift");break;case 18:"shift"===AFK.template.activeMode?AFK.template.toggleActiveMode("alt-shift"):AFK.template.toggleActiveMode("alt");break;default:t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:e.key}}),document.dispatchEvent(t)}document.querySelector(`#a-keyboard-${e.key}`)&&(document.querySelector(`#a-keyboard-${e.key}`).dispatchEvent(new Event("mousedown")),setTimeout(function(){document.querySelector(`#a-keyboard-${e.key}`).dispatchEvent(new Event("mouseleave"))},100))},handleKeyboardVR:function(e){let t,a=document.querySelector(`#${e.target.id}`).getAttribute("value"),o=document.querySelector(`#${e.target.id}`).getAttribute("key-code");switch(o){case"13":t=new CustomEvent("a-keyboard-update",{detail:{code:o,value:"\n"}}),document.dispatchEvent(t);break;case"8":case"9":break;case"16":AFK.template.toggleActiveMode("shift");break;case"18":"shift"===AFK.template.activeMode?AFK.template.toggleActiveMode("shift-alt"):AFK.template.toggleActiveMode("alt");break;default:t=new CustomEvent("a-keyboard-update",{detail:{code:o,value:a}}),document.dispatchEvent(t)}},remove:function(){}})},function(e,t,a){let o=a(3),r=a(5);e.exports=class{constructor(){this.keyboardKeys={},this.activeMode="normal",this.color="#000"}draw(e){this.parentEl=e.el,this.color=e.color,this.keyboardKeys=o(e.locale),this.drawKeyboard()}getKeyPosition(e,t){return r[e][t]}drawButton(e){const t=e.key,a=this.getKeyPosition(e.row,e.column),o=document.createElement("a-entity");o.setAttribute("position",a);const r=document.createElement("a-entity");r.setAttribute("scale","0.03 0.03 0.013"),r.setAttribute("geometry","primitive: box"),r.setAttribute("material","color: #ccc");const n=document.createElement("a-text");n.id=`a-keyboard-${t.value}`,n.setAttribute("key-code",t.code),n.setAttribute("value",t.value),n.setAttribute("align","center"),n.setAttribute("position","0 0 0.01"),n.setAttribute("width","0.35"),n.setAttribute("geometry","primitive: plane; width: 0.03; height: 0.03"),n.setAttribute("material","opacity: 0.0; transparent: true; color: #000"),n.setAttribute("wrap-count","40"),n.setAttribute("color",this.color),n.setAttribute("keyboard-button",!0),n.setAttribute("class","collidable"),o.appendChild(r),o.appendChild(n),this.parentEl.appendChild(o)}drawKeyboard(){for(;this.parentEl.firstChild;)this.parentEl.removeChild(this.parentEl.firstChild);if(this.keyboardKeys){const e=this.keyboardKeys[this.activeMode];for(let t=0;t<e.length;t++){let a=e[t].split(" ");for(let e=0;e<a.length;e++){const o=this.parseSymbols(a[e]);this.drawButton({key:o,row:t,column:e})}}}}toggleActiveMode(e){"shift"===this.activeMode?this.activeMode="normal":"alt-shift"===this.activeMode?this.activeMode="alt":this.activeMode=e,this.drawKeyboard()}parseSymbols(e){if("\\u"===e.substring(0,2))return{value:String.fromCharCode(e),code:e};switch(e){case"{enter}":return{value:"Enter",code:"13"};case"{tab}":return{value:"Tab",code:"9"};case"{shift}":return{value:"Shift",code:"16"};case"{alt}":return{value:"Alt",code:"18"};case"{space}":return{value:" ",code:"32"};case"{empty}":return{value:"",code:""};case"{cancel}":return{value:"Cancel",code:""};case"{bksp}":return{value:"<-",code:""};default:return{value:e,code:e.charCodeAt(0)}}}}},function(e,t,a){const o=a(4);e.exports=function(e){switch(e){case"en":default:return o}}},function(e,t){e.exports={name:"ms-US-International",normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ]","a s d f g h j k l ; ' \\ {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { }",'A S D F G H J K L : " | {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["{empty} ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « »","á ß ð {empty} {empty} {empty} {empty} {empty} ø ¶ ´ ¬ {enter}","{shift} æ {empty} © {empty} {empty} ñ µ ç {empty} ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["{empty} ¹ {empty} {empty} £ {empty} {empty} {empty} {empty} {empty} {empty} {empty} ÷ {bksp}","{tab} Ä Å É {empty} Þ Ü Ú Í Ó Ö {empty} {empty}","Á § Ð {empty} {empty} {empty} {empty} {empty} Ø ° ¨ ¦ {enter}","{shift} Æ {empty} ¢ {empty} {empty} Ñ {empty} Ç {empty} {empty} {shift}","{accept} {alt} {space} {alt} {cancel}"]}},function(e,t){e.exports=[["-0.2 0.08 0","-0.16 0.08 0","-0.12 0.08 0","-0.08 0.08 0","-0.04 0.08 0","0 0.08 0","0.04 0.08 0","0.08 0.08 0","0.12 0.08 0","0.16 0.08 0","0.20 0.08 0","0.24 0.08 0","0.28 0.08 0","0.32 0.08 0"],["-0.2 0.04 0","-0.16 0.04 0","-0.12 0.04 0","-0.08 0.04 0","-0.04 0.04 0","0 0.04 0","0.04 0.04 0","0.08 0.04 0","0.12 0.04 0","0.16 0.04 0","0.20 0.04 0","0.24 0.04 0","0.28 0.04 0","0.32 0.04 0"],["-0.2 0 0","-0.16 0 0","-0.12 0 0","-0.08 0 0","-0.04 0 0","0 0 0","0.04 0 0","0.08 0 0","0.12 0 0","0.16 0 0","0.20 0 0","0.24 0 0","0.28 0 0","0.32 0 0"],["-0.2 -0.04 0","-0.16 -0.04 0","-0.12 -0.04 0","-0.08 -0.04 0","-0.04 -0.04 0","0 -0.04 0","0.04 -0.04 0","0.08 -0.04 0","0.12 -0.04 0","0.16 -0.04 0","0.20 -0.04 0","0.24 -0.04 0","0.32 -0.04 0","0.56 -0.04 0"],["-0.2 -0.08 0","-0.16 -0.08 0","-0.12 -0.08 0","-0.08 -0.08 0","-0.04 -0.08 0","0 -0.08 0","0.04 -0.08 0","0.08 -0.08 0","0.12 -0.08 0","0.16 -0.08 0","0.20 -0.08 0","0.24 -0.08 0","0.32 -0.08 0","0.56 -0.08 0"]]}]);