!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){a(1);var o=a(2);let n={mode:"normal"};n.template=new o,e.exports=window.AFK=n},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("keyboard-button",{init:function(){var e=this.el,t=this;e.addEventListener("mousedown",function(){e.setAttribute("material","opacity","0.7")}),e.addEventListener("mouseup",function(){e.setAttribute("material","opacity",t.isMouseEnter?"0.4":"0")}),e.addEventListener("mouseenter",function(){e.setAttribute("material","opacity","0.4"),t.isMouseEnter=!0}),e.addEventListener("mouseleave",function(){e.setAttribute("material","opacity","0"),t.isMouseEnter=!1})}}),AFRAME.registerComponent("a-keyboard",{schema:{dismissable:{default:!0},model:{default:""},font:{default:"Helvetica"},color:{default:"#000"},handleUpdate:{type:"string"},locale:{default:"en"},value:{default:""},audio:{default:!1},interactionMode:{default:"desktop"}},init:function(){const e=this.el,t=this.data.dismissable,a=this.data.locale,o=this.data.model,n=this.data.font,r=this.data.color;AFK.template.draw({locale:a,model:o,font:n,el:e,color:r,dismissable:t}),this.attachEventListeners()},attachEventListeners:function(){window.addEventListener("keydown",this.handleKeyboardPress),document.querySelector("#keyboard").addEventListener("click",this.handleKeyboardVR)},removeEventListeners:function(){window.removeEventListener("keydown",this.handleKeyboardPress),document.querySelector("#keyboard").removeEventListener("click",this.handleKeyboardVR)},handleKeyboardPress:function(e){let t;const a=e.key.charCodeAt(0);switch(e.keyCode){case 9:t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:"\t"}}),document.dispatchEvent(t);break;case 8:t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:""}}),document.dispatchEvent(t);break;case 13:t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:"\n"}}),document.dispatchEvent(t);break;case 16:case 18:break;case 27:this.dismissable&&(t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:""}}),document.dispatchEvent(t));break;case 32:t=new CustomEvent("a-keyboard-update",{detail:{code:e.keyCode,value:" "}}),document.dispatchEvent(t);break;default:t=new CustomEvent("a-keyboard-update",{detail:{code:a,value:e.key}}),document.dispatchEvent(t)}document.querySelector(`#a-keyboard-${a}`)&&(document.querySelector(`#a-keyboard-${a}`).dispatchEvent(new Event("mousedown")),setTimeout(function(){document.querySelector(`#a-keyboard-${a}`).dispatchEvent(new Event("mouseleave"))},80))},handleKeyboardVR:function(e){let t,a=document.querySelector(`#${e.target.id}`).getAttribute("value"),o=document.querySelector(`#${e.target.id}`).getAttribute("key-code");switch(o){case"13":t=new CustomEvent("a-keyboard-update",{detail:{code:o,value:"\n"}}),document.dispatchEvent(t);break;case"8":t=new CustomEvent("a-keyboard-update",{detail:{code:8,value:""}}),document.dispatchEvent(t);break;case"9":t=new CustomEvent("a-keyboard-update",{detail:{code:o,value:"\t"}}),document.dispatchEvent(t);break;case"16":AFK.template.toggleActiveMode();break;case"32":t=new CustomEvent("a-keyboard-update",{detail:{code:o,value:" "}}),document.dispatchEvent(t);break;default:t=new CustomEvent("a-keyboard-update",{detail:{code:o,value:a}}),document.dispatchEvent(t)}},remove:function(){this.removeEventListeners()}})},function(e,t,a){let o=a(3),n=a(5);e.exports=class{constructor(){this.keyboardKeys={},this.dismissable=!0,this.activeMode="normal",this.color="#000"}draw(e){this.parentEl=e.el,this.color=e.color,this.dismissable=e.dismissable,this.keyboardKeys=o(e.locale),console.log(this.dismissable),this.drawKeyboard()}getKeyPosition(e,t){return n[e][t]}drawButton(e){const t=e.key,a=this.getKeyPosition(e.row,e.column),o=document.createElement("a-entity");o.setAttribute("position",a);const n=document.createElement("a-entity");n.setAttribute("scale","0.03 0.03 0.013"),n.setAttribute("geometry","primitive: box"),n.setAttribute("material","color: #ccc");const r=document.createElement("a-text");r.id=`a-keyboard-${t.code}`,r.setAttribute("key-code",t.code),r.setAttribute("value",t.value),r.setAttribute("align","center"),r.setAttribute("position","0 0 0.01"),r.setAttribute("width","0.35"),r.setAttribute("geometry","primitive: plane; width: 0.03; height: 0.03"),r.setAttribute("material","opacity: 0.0; transparent: true; color: #000"),r.setAttribute("wrap-count","40"),r.setAttribute("color",this.color),r.setAttribute("keyboard-button",!0),r.setAttribute("class","collidable"),o.appendChild(n),o.appendChild(r),this.parentEl.appendChild(o)}drawKeyboard(){for(;this.parentEl.firstChild;)this.parentEl.removeChild(this.parentEl.firstChild);if(this.keyboardKeys){const e=this.keyboardKeys[this.activeMode];for(let t=0;t<e.length;t++){let a=e[t].split(" ");for(let e=0;e<a.length;e++){const o=this.parseSymbols(a[e]);(this.dismissable||"27"!==o.code)&&(this.keyboardKeys.alt||"18"!==o.code)&&(this.keyboardKeys.alt||"18"!==o.code)&&this.drawButton({key:o,row:t,column:e})}}}}toggleActiveMode(){"shift"===this.activeMode?this.activeMode="normal":this.activeMode="shift",this.drawKeyboard()}parseSymbols(e){switch(e){case"{enter}":return{value:"Enter",code:"13"};case"{tab}":return{value:"Tab",code:"9"};case"{shift}":return{value:"Shift",code:"16"};case"{space}":return{value:" ",code:"32"};case"{empty}":return{value:"",code:""};case"{cancel}":return{value:"Cancel",code:"27"};case"{bksp}":return{value:"<-",code:"8"};case"{submit}":return{value:"Submit",code:"999"};default:return{value:e,code:e.charCodeAt(0)}}}}},function(e,t,a){const o=a(4);e.exports=function(e){switch(e){case"en":default:return o}}},function(e,t){e.exports={name:"ms-US-International",normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ]","{empty} a s d f g h j k l ; ' \\ {enter}","{shift} z x c v b n m , . / {shift}","{cancel} {space} {submit}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { }",'A S D F G H J K L : " | {enter}',"{shift} Z X C V B N M < > ? {shift}","{cancel} {alt} {space} {alt} {submit}"]}},function(e,t){e.exports=[["-0.2 0.08 0","-0.16 0.08 0","-0.12 0.08 0","-0.08 0.08 0","-0.04 0.08 0","0 0.08 0","0.04 0.08 0","0.08 0.08 0","0.12 0.08 0","0.16 0.08 0","0.20 0.08 0","0.24 0.08 0","0.28 0.08 0","0.32 0.08 0"],["-0.2 0.04 0","-0.16 0.04 0","-0.12 0.04 0","-0.08 0.04 0","-0.04 0.04 0","0 0.04 0","0.04 0.04 0","0.08 0.04 0","0.12 0.04 0","0.16 0.04 0","0.20 0.04 0","0.24 0.04 0","0.28 0.04 0","0.32 0.04 0"],["-0.2 0 0","-0.16 0 0","-0.12 0 0","-0.08 0 0","-0.04 0 0","0 0 0","0.04 0 0","0.08 0 0","0.12 0 0","0.16 0 0","0.20 0 0","0.24 0 0","0.28 0 0","0.32 0 0"],["-0.2 -0.04 0","-0.16 -0.04 0","-0.12 -0.04 0","-0.08 -0.04 0","-0.04 -0.04 0","0 -0.04 0","0.04 -0.04 0","0.08 -0.04 0","0.12 -0.04 0","0.16 -0.04 0","0.20 -0.04 0","0.24 -0.04 0","0.32 -0.04 0","0.56 -0.04 0"],["-0.2 -0.08 0","-0.16 -0.08 0","-0.12 -0.08 0","-0.08 -0.08 0","-0.04 -0.08 0","0 -0.08 0","0.04 -0.08 0","0.08 -0.08 0","0.12 -0.08 0","0.16 -0.08 0","0.20 -0.08 0","0.24 -0.08 0","0.32 -0.08 0","0.56 -0.08 0"]]}]);